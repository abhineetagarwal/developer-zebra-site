---
title: MDM Toolkit
layout: guide.html
product: MDM Toolkit
productversion: '1.0'
---


<span id="overview" class="anchor"><span id="_Toc449961086" class="anchor"></span></span>Overview
-------------------------------------------------------------------------------------------------

This Toolkit provides a sample application and the following guide to
walk through the common tasks and components that you will use in order
for your MDM client to interface with the MXMS (MX Management System)
available on Zebra Android devices. This Toolkit does not provide the
means to generate XML required to exchange data with the MXMS. XML
should be generated by utilizing the **Export a Profile to an MDM**
feature of [StageNow
2.3](http://techdocs.zebra.com/stagenow/2-3/gettingstarted/). XML, once
generated, should be passed into the MDM client via some transport
mechanism, processed on the client by submission to the MXMS and then
the resulting XML response from MXMS should be passed back out of the
client for processing. The MXMS XML response will contain data as to
whether the submitted XML processed successfully, or failed due to
errors in XML syntax or requested operation.

<span id="mxms-xml-submission-guide" class="anchor"><span id="_Toc449961087" class="anchor"></span></span>MXMS XML Submission Guide
-----------------------------------------------------------------------------------------------------------------------------------

Generating XML, and transporting that XML to and from the MDM client
will not be covered in this guide.

This guide will cover:

-   **Binding to the MXMS** - All communications to the MXMS on Zebra
    devices, occur through a common binding interface.

-   **Submitting XML** - Within the MDM client, XML will be submitted to
    apply settings via a simple API.

<span id="requirements" class="anchor"><span id="_Toc449961088" class="anchor"></span></span>Requirements
---------------------------------------------------------------------------------------------------------

-   **MDM Toolkit**

-   **Zebra Android Device with MX**

<!-- -->

-   **Note:** For instructions to install or update MX on your Zebra
    Android Device, please see the [StageNow 2.3 - Getting
    Started](http://techdocs.zebra.com/stagenow/2-3/gettingstarted/) Documentation.

<!-- -->

-   **Valid MXMS XML** - XML should be verified to work with your device
    through [StageNow
    2.3](http://techdocs.zebra.com/stagenow/2-3/gettingstarted/) prior
    use with this toolkit. Features that do not work in StageNow, will
    also not work using the MDM ToolKit

<span id="binding-to-the-mxms" class="anchor"><span id="_Toc449961089" class="anchor"></span></span>Binding to the MXMS
-----------------------------------------------------------------------------------------------------------------------

1.  Create a new Android project with an empty activity.

2.  The following permissions needs to be added to your application's
    manifest file to allow it to access MXMS.

-   <uses-permission android:name="com.symbol.mxmf.ACCESS_MX_MANAGEMENT_FRAMEWORK_SERVICE" />
        <uses-permission android:name="com.motorolasolutions.emdk.mxframework.ACCESS_MX_MANAGEMENT_FRAMEWORK_SERVICE"/>

1.  Create two new packages in your application. One package should be
    named `com.symbol.mxmf` and the other package should be named
    `com.motorolasolutions.emdk.mxframework`. These packages will be
    used for holding the aidl (Android Interface Definition Language)
    files.

-   **Note:** When Using Android Studio, the new packages need to be
    created in the **aidl** folder of your project or the IDE will not
    automatically generate the necessary interface files.

1.  The SimpleMdmToolKitSample project, which is supplied in the MDM
    Toolkit, contains the IMxFrameworkService.aidl files that should be
    copied into your application. These AIDL files are located in the
    SimpleMdmToolKitSample's `com.symbol.mxmf` and
    `com.motorolasolutions.emdk.mxframework` packages. These AIDL files
    should be copied into the respective packages that were made in
    Step 3.

2.  In the package that contains the empty activity that was created in
    Step 1, copy and paste the following classes from the
    SimpleMdmToolKitSample project's `com.symbol.simplemdmtoolkitsample`
    package:

    -   MxNamespace.java

    -   MxNamespaceMotorolaSolutions.java

    -   MxNamespaceSymbol.java

    -   SymbolBrand.java

-   **Note:** The package names in these classes will need to be edited
    to match the package name of your application.

1.  In your application's activity, the `onCreate` method should call
    the init method that is in the SymbolBrand class. This will check
    that MXMS is installed on the device. If MXMS is detected, your
    application will be bound to MXMS, allowing interaction to occur
    between them.

-   // Variable to hold the main activity
        static private Activity m_activity;

        @Override
        protected void onCreate(Bundle savedInstanceState)
        {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);

            // Save the main activity so it can be accessed from other threads
            m_activity = this;

            // Call init ONCE to start the process of binding to the MXMS
            // Note: You should call init early (e.g. as shown here in onCreate)
            //       XML cannot be submitted to the MXMS the binding is complete
            SymbolBrand.MXMS.init(this,mMxFrameworkServiceConnection);
        }

1.  The ServiceConnection will also need to be added to your
    application's activity. This will contain the `onServiceConnected`
    callback that will notify your application that it was successfully
    bound to MXMS. It should also contain the `onServiceDisconnected`
    callback that will notify your application when it was successfully
    unbound with MXMS.

-   // This definition is mandatory to track binding to the MXMS
        private ServiceConnection mMxFrameworkServiceConnection = new ServiceConnection()
        {
            // Callback to notify when binding to the MXMS has completed
            public void onServiceConnected(ComponentName className,IBinder service)
            {

            }

            // Callback to notify when unbinding from the MXMS has occurred
            public void onServiceDisconnected(ComponentName className)
            {

            }
        }; 

1.  In the `onServiceConnected method`, the `onServiceConnected` in the
    SymbolBrand helper class should also be called, which will notify
    this class that your application was bound to MXMS. At the end of
    the method, the term method in the SymbolBrand class should be
    called, which will unbind your application from MXMS. The
    application can also exit at this point. In the
    `onServiceDisconnected` method, the `onServiceDisconnected` method
    in the SymbolBrand helper class should also be called, which will
    notify this class that your application was unbound from MXMS.

-   // This definition is mandatory to track binding to the MXMS
        private ServiceConnection mMxFrameworkServiceConnection = new ServiceConnection()
        {
            // Callback to notify when binding to the MXMS has completed
            public void onServiceConnected(ComponentName className,IBinder service)
            {
                // Pass the binding notification on so the helper class can know the service was bound
                SymbolBrand.MXMS.onServiceConnected(className,service);

                // Call term 
                SymbolBrand.MXMS.term(m_activity,mMxFrameworkServiceConnection);

                // Exit the application
                m_activity.finish();                
            }

            // Callback to notify when unbinding from the MXMS has occurred
            public void onServiceDisconnected(ComponentName className)
            {
                // Pass the unbinding notification on so the helper class can know the service was unbound
                SymbolBrand.MXMS.onServiceDisconnected(className);
            }
        };    

<span id="submitting-xml" class="anchor"><span id="_Toc449961090" class="anchor"></span></span>Submitting XML
-------------------------------------------------------------------------------------------------------------

In your application's activity's `onServiceConnected` method, you can
add code before the `term` call that would submit XML to MXMS. This
example submits XML generated by StageNow directly after calling
`onServiceConnected`. It would also be possible to submit xml from other
locations as long as `term` was not called in onServiceConnected. The
`onServiceConnected` method is the first location where XML submission
can occur.

1.  To submit XML we first use the `isReady` method from the SymbolBrand
    class to check if the application successfully bound to MXMS, which
    would mean that it is ready to accept XML from your application.

2.  Next, a String containing XML generated by StagNow would be striped
    of all formatting by using a helper method provided by the
    XmlParser class. The `xml` variable, in byte array form, is
    converted to a ByteArrayInputStream and then passed to the
    XmlParser.`readXml()` helper method.

3.  The String output from readXml() in step 2 is used by the
    SymbolBrand class's `submitXml` method, which submits the XML to
    the MXMS.

4.  Then MXMS will return a Result XML String which should be passed
    back to a server for processing.

-   // This definition is mandatory to track binding to the MXMS
        private ServiceConnection mMxFrameworkServiceConnection = new ServiceConnection()
        {
            // Callback to notify when binding to the MXMS has completed
            public void onServiceConnected(ComponentName className,IBinder service)
            {
                // Pass the binding notification on so the helper class can know the service was bound
                SymbolBrand.MXMS.onServiceConnected(className,service);

                // For the purposes of this test application, we call this from here because this is the FIRST time it can be done
                // In a real world situation, it might be called repeatedly from other locations, as things that need to be done are identified

                if ( SymbolBrand.MXMS.isReady() ){

                    //  XML generated by StageNow would be passed in to initialize the xml variable. Below is a example of what that xml might look like.
                    String xml = "<wap-provisioningdoc>
                                <characteristic type="Clock" version="4.2" >
                                    <parm name="AutoTime" value="false"/>
                                    <parm name="TimeZone" value="GMT-5"/>
                                    <parm name="Date" value="2014-12-03"/>
                                    <parm name="Time" value="11:00:00"/>
                                </characteristic>
                            </wap-provisioningdoc>";

                    // Remove all formatting from xml
                    String inXml = XmlParser.readXml(new ByteArrayInputStream(xml.getBytes())); 


                    // Submit the XML to the MXMS for processing
                    // Note: This will FAIL unless SymbolBrand.MXMS.isReady(), indicating that the binding to the MXMS has completed successfully

                    String outXml = SymbolBrand.MXMS.submitXml(inXml);

                    //outXml would then be passed back to the server for processing


                }
                // Call term 
                SymbolBrand.MXMS.term(m_activity,mMxFrameworkServiceConnection);

                // Exit the application
                m_activity.finish();                
            }

            // Callback to notify when unbinding from the MXMS has occurred
            public void onServiceDisconnected(ComponentName className)
            {
                // Pass the unbinding notification on so the helper class can know the service was unbound
                SymbolBrand.MXMS.onServiceDisconnected(className);
            }
        }; 

<span id="sample-overview" class="anchor"><span id="_Toc449961091" class="anchor"></span></span>Sample Overview
---------------------------------------------------------------------------------------------------------------

The included sample not only provides Helper libraries and Service
Interface definition files used in the guide above, but also includes
many examples of generated XML ( located in the project's Assets folder)
used to configure a zebra device via the MXMS.

### <span id="sample-usage" class="anchor"><span id="_Toc449961092" class="anchor"></span></span>Sample Usage

The attached sample is an Eclipse/ADT project that can be opened
directly with Eclipse/ADT or imported into Android Studio.

To use this sample:

1.  Open/Import the sample in your prefered IDE.

2.  Attach a Zebra Android device via USB and enable it's USB debugging
    feature in Settings &gt; Developer Options.

3.  Run the sample as is, or choose the xml file you wish to submit by
    uncommenting/commenting out your prefered **xmlName** global
    variable definition.

-   **Note:** The sample will likely run and close to fast to see a User
    interface, so watch **logcat** for the applications output.
